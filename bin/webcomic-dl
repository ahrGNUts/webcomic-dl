#!/usr/bin/python
import webcomic_dl
from webcomic_dl.comics import *
from webcomic_dl import cli, Comic
import requests

def getComic(url):
    for c in Comic.__subclasses__():
        print("trying " + c.__name__)
        url=c.match(args.comic)
        print(url)
        if(url):
            print("using " + c.__name__)
            return c(url)

args=cli.getArgs()
comic=getComic(args.comic)
while comic:
    print("Downloading {0}".format(comic.getImgFilename()))
    comic.downloadImg()
    comic.saveProgress()
    comic=comic.getNextComic()
print("Done!")
